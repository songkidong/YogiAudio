<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.project3.yogiaudio.repository.interfaces.MusicRepository">
	
	
	<!-- 국내음악 리스트끌고오기 -->
	<select id ="domesticListAll" resultType="com.project3.yogiaudio.dto.music.MusicDTO">
		select * from music 
		where music_major = "국내"
		limit #{startPage},#{pageSize}
	</select>
	
	<!-- 국내음악 리스트카운팅하기 -->
	<select id="countdomesticListAll" resultType="int">
		<![CDATA[ select count(*) from music where music_no > 0 and music_major="국내"]]>
	</select>
	
	
	<!-- 국외음악 리스트끌고오기 -->
	<select id="aboardListAll" resultType="com.project3.yogiaudio.dto.music.MusicDTO">
		select * from music
		where music_major = "국외"
		limit #{startPage},#{pageSize}
	</select>
	
	
	<!-- 국외음악 리스트카운팅하기 -->
	<select id="countaboardListAll" resultType="int">
		<![CDATA[ select count(*) from music where music_no > 0 and music_major="국외"]]>
	</select>
	
	
	<!-- 국내음악 상세조회하기 (조건 : 넘버 , 국내 ) -->
	<select id ="domesticDetail" resultType="com.project3.yogiaudio.dto.music.MusicDTO">
		select * from music
		where music_no=#{musicno} and music_major=#{musicmajor}
	</select>
	
	<!-- 국외음악 상세조회하기 (조건 : 넘버 , 국내 ) -->
	<select id ="aboardDetail" resultType="com.project3.yogiaudio.dto.music.MusicDTO">
		select * from music
		where music_no=#{musicno} and music_major=#{musicmajor}
	</select>
	
	
	<!-- 앨범자켓사진업데이트하기 -->
	<update id ="albumUpdate">
		update music set file_path=#{filepath}
		where music_no=#{musicno}
	</update>
	
	
	<!-- 음원파일등록하기 -->
	<update id="musicUpdate">
		update music set file_music=#{filemusic}
		where music_no=#{musicno}
	</update>
	
	
	
	<!-- 결제 후 상태업데이트하기 (추후 이용권구매후 유저상태 -> Y 업뎃으로 바꿔야함!!) -->
	<update id="statusUpdate">
		update user set status= 'Y'
		where id=#{id}
	</update>
	
	
	
	
	<!-- 국내최신순으로 메인페이지리스트출력 -->
	<select id="newMusicList" resultType="com.project3.yogiaudio.dto.music.MusicDTO">
		select * from music order by startdate asc
	</select>
	
	
	<!-- 국내인기순으로 메인페이지리스트출력 -->
	<select id ="likeMusicList" resultType="com.project3.yogiaudio.dto.music.MusicDTO">
		select * from music order by likeit desc
	</select>
	
	

</mapper>